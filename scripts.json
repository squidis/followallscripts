{"scripts": [
    {
      "id": "39b823fa-cc67-4c24-b087-b4drt95ea2f8",
      "script": "{\"scrapePage\":function scrapePage(doc, url) {\n  console.log('twitterScraper.js 23', doc, url);\n\n  var scrapeItem = function scrapeItem(item, url) {\n    var scraped = {};\n    var reblogSpan = item.querySelectorAll('span[style=\"-webkit-line-clamp: 2;\"]');\n    var reblogSpanText = reblogSpan.length > 0 ? reblogSpan[0].textContent : null;\n\n    if (reblogSpanText) {\n      scraped.isReblog = !!reblogSpanText.match(/Retweeted/);\n    }\n\n    var retweets = item.querySelectorAll('div[data-testid=retweet]')[0].textContent.trim();\n    var votesRaw = item.querySelectorAll('div[data-testid=like]')[0].textContent.trim();\n    var comments = item.querySelectorAll('div[data-testid=reply]')[0].textContent.trim();\n    var time = item.querySelectorAll('time')[0];\n    scraped.created = new Date(time.getAttribute('datetime')).getTime();\n    var permalink = time.closest('a').getAttribute('href');\n    var linkA = item.querySelectorAll('a[rel=\" noopener noreferrer\"]');\n    var images = item.querySelectorAll('div[aria-label=Image] img'),\n        imgUrls = [],\n        href,\n        parts;\n\n    if (images.length > 0) {\n      images.forEach(function (image) {\n        href = image.getAttribute('src');\n        parts = href.split('&');\n        imgUrls.push(parts[0] + '&name=900x900');\n      });\n    }\n\n    var domain = 'twitter.com';\n    scraped.title = item.querySelectorAll('div > div.r-bnwqim').length > 0 ? item.querySelectorAll('div > div.r-bnwqim')[0].textContent : '';\n    scraped.link = linkA.length > 0 ? linkA[0].getAttribute('href') : false;\n    scraped.votes = votesRaw.toLowerCase() ? votesRaw.toLowerCase() : 1;\n    scraped.reblogs = retweets ? parseInt(retweets, 10) : 0;\n    scraped.commentCount = parseInt(comments, 10) || 0;\n    scraped.url = \"https://\" + domain + permalink;\n    scraped.displayName = item.querySelectorAll('a div.r-3s2u2q span span')[0].textContent;\n    scraped.username = item.querySelectorAll('a div div[dir=ltr] span')[0].textContent;\n    scraped.images = imgUrls;\n    scraped.profileURL = \"https://\" + domain + item.querySelectorAll('article[data-testid=tweet] .r-zl2h9q a')[0].getAttribute('href');\n    scraped.autoEmbed = 'url';\n    return scraped;\n  };\n\n  var listData = [];\n  window.scrollBy(0, 1500 + Math.floor(Math.random() * 800)); //Click nsfw warning\n\n  if (doc.querySelectorAll('.r-6wcr4z div[role=button]').length > 0) doc.querySelectorAll('.r-6wcr4z div[role=button]')[0].click();\n  var list = doc.querySelectorAll('section div[aria-label*=Tweets] article.r-6416eg');\n\n  if (list.length > 0) {\n    console.log('twitterScraper.js 71', list);\n    list.forEach(function (item) {\n      var post = scrapeItem(item, url);\n      listData.push(post);\n    }); // var listData = list.map(item => {\n    // })\n\n    return listData;\n  }\n}}",
      "name": "Twitter remote",
      "numeralConvert": [
        "votes"
      ],
      "regex": "twitter.com",
      "updateMethod": "screen",
      "description": "Screen scrapes Twitter profiles",
      "type": "remote"
    }
]
}
