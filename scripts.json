{"scripts": [
    {
      "id": "1cd5398b-76cc-4a33-ac64-6286a4e8bdad",
      "script": "{\"scrapePage\":function scrapePage(details) {\n  function mergeUniqueObjects(originalArray, newArray) {\n    var uniqueObjects = newArray.filter(function (newObj) {\n      return !originalArray.some(function (originalObj) {\n        return originalObj.url === newObj.url;\n      });\n    });\n    return originalArray.concat(uniqueObjects);\n  }\n  return new Promise(function (resolve) {\n    var totalList = [];\n    var interval = setInterval(function () {\n      window.scrollBy(0, window.innerHeight + Math.floor(Math.random() * 200));\n      //Click nsfw warning\n      if (document.querySelectorAll('.r-6wcr4z div[role=button]').length > 0) document.querySelectorAll('.r-6wcr4z div[role=button]')[0].click();\n      var listData = [].map.call(document.querySelectorAll('section div[data-testid=\"cellInnerDiv\"] article.r-6416eg'), function (item) {\n        var scraped = {};\n        var reblogSpan = item.querySelectorAll('span[style=\"-webkit-line-clamp: 2;\"]');\n        var reblogSpanText = reblogSpan.length > 0 ? reblogSpan[0].textContent : null;\n        if (reblogSpanText) {\n          scraped.isReblog = !!reblogSpanText.match(/Retweeted/);\n        }\n        var retweets = item.querySelectorAll('div[data-testid=retweet]')[0].textContent.trim();\n        var votesRaw = item.querySelectorAll('div[data-testid=like]')[0].textContent.trim();\n        var comments = item.querySelectorAll('div[data-testid=reply]')[0].textContent.trim();\n        var time = item.querySelector('time');\n        if (time) {\n          scraped.created = new Date(time.getAttribute('datetime')).getTime();\n        } else {\n          return false;\n        }\n        var permalink = time.closest('a').getAttribute('href') || \"\";\n        var linkA = item.querySelectorAll('a[rel=\" noopener noreferrer\"]');\n        var images = item.querySelectorAll('div[aria-label=Image] img'),\n          imgUrls = [],\n          href,\n          parts;\n        if (images.length > 0) {\n          images.forEach(function (image) {\n            href = image.getAttribute('src');\n            parts = href.split('&');\n            imgUrls.push(parts[0] + '&name=900x900');\n          });\n        }\n        var domain = 'twitter.com';\n        scraped.title = item.querySelectorAll('div > div.r-bnwqim').length > 0 ? item.querySelectorAll('div > div.r-bnwqim')[0].textContent : '';\n        scraped.link = linkA.length > 0 ? linkA[0].getAttribute('href') : false;\n        scraped.votes = votesRaw.toLowerCase() ? votesRaw.toLowerCase() : 1;\n        scraped.reblogs = retweets ? parseInt(retweets, 10) : 0;\n        scraped.commentCount = parseInt(comments, 10) || 0;\n        scraped.url = \"https://\" + domain + permalink;\n        scraped.displayName = item.querySelectorAll('a div.r-3s2u2q span span')[0].textContent;\n        scraped.username = item.querySelectorAll('a div div[dir=ltr] span')[0].textContent;\n        scraped.images = imgUrls;\n        scraped.profileURL = \"https://\" + domain + item.querySelectorAll('article[data-testid=tweet] .r-zl2h9q a')[0].getAttribute('href');\n        scraped.autoEmbed = 'url';\n        return scraped;\n      }).filter(function (item) {\n        return item !== false;\n      });\n      console.log('Untitled-2 71', listData, totalList);\n      totalList = mergeUniqueObjects(totalList, listData);\n      if (totalList.length > 10) {\n        console.log('Untitled-2 87', totalList);\n        return resolve({\n          list: listData\n        });\n      }\n    }, 1000);\n  });\n}}"
        "name": "Twitter remote",
      "regex": "twitter.com",
      "updateMethod": "screen",
      "description": "Screen scrapes Twitter profiles",
      "type": "remote"
    }
]
}
